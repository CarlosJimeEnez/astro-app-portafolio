---
import Main from "@/layouts/main.astro";
import Header from "@/layouts/header.astro";
import { Image } from "astro:assets";
import { Github, ExternalLink, ArrowLeft } from "lucide-react";
import { Button } from "@/components/ui/button";
import Info from "@/layouts/info.astro";

// Define la funci贸n getStaticPaths requerida para rutas din谩micas
export function getStaticPaths() {
  // Define los datos de los proyectos
  const projects = [
    {
      slug: "sistema-reclutamiento",
      title: "Sistema de Reclutamiento Interno (Web App)",
      subtitle: "Plataforma para gesti贸n de procesos de reclutamiento",
      description:
        "Plataforma web para gestionar el proceso de reclutamiento interno de una empresa. Permite a los empleados postularse a vacantes internas, y a los reclutadores gestionar todo el proceso de selecci贸n.",
      imageUrl: "/ERP.png",
      
      technologies: ["WebSockets","Supabase", "Vue.js", "Tailwind", "Vercel", "Shadcn Vue", "Pinia"],
      features: [
        "Gesti贸n de vacantes internas",
        "Sistema de postulaciones",
        "Seguimiento de procesos de selecci贸n",
        "Notificaciones autom谩ticas",
      ],
      challenges: [
        "Actualizaci贸n en tiempo real",
        "Integraci贸n con sistemas existentes",
        "Implementaci贸n de permisos por roles",
      ],
      learnings: [
        "Implementaci贸n de WebSockets",
        "Optimizaci贸n de consultas en Supabase",
        "Mejores pr谩cticas en Vue.js",
        "Dise帽o de interfaces intuitivas",
      ],
    },
    {
      slug: "punto-venta",
      title: "Punto de Venta (POS)",
      subtitle: "Sistema de venta para cafeter铆a con brazo rob贸tico",
      description:
        "Aplicaci贸n de escritorio que se conecta con API de brazo rob贸tico para vender caf茅s. Integra gesti贸n de inventario, ventas y reportes.",
      imageUrl: "/POS.png",
      technologies: ["Angular", "Tauri", "Flask", "Supabase", "Asp.net"],
      features: [
        "Interfaz para control de brazo rob贸tico",
        "Gesti贸n de inventario en tiempo real",
        "Menu de productos",
        "Integraci贸n con impresoras de tickets",
      ],
      challenges: [
        "Uso de Tauri con rust",
        "Gesti贸n de inventario",
        "Comunicaci贸n con API de brazo rob贸tico",
        "Sincronizaci贸n offline/online",
      ],
      learnings: [
        "Comunicaci贸n con API de brazo rob贸tico",
        "Desarrollo de aplicaciones de escritorio con Tauri",
        "Integraci贸n de sistemas heterog茅neos",
        "Optimizaci贸n de rendimiento en tiempo real",
      ],
    },
    {
      slug: "erp-inventario",
      title: "ERP de Gesti贸n de Inventario de Herramientas",
      subtitle: "Sistema integral para control de herramientas",
      description:
        "Aplicaci贸n de escritorio que permite gestionar el inventario de herramientas de una empresa. Incluye control de pr茅stamos, mantenimientos y reportes.",
      imageUrl: "/ERPPython.png",
      technologies: ["Python", "PostrgreSQL"],
      features: [
        "Autenticaci贸n de ususarios", 
        "Gesti贸n de inventario con c贸digos QR",
        "Sistema de pr茅stamos y devoluciones",
        "Programaci贸n de mantenimientos",
        "Reportes personalizables",
      ],
      challenges: [
        "Implementaci贸n de sistema offline-first",
        "Dise帽o de base de datos eficiente",
        "Integraci贸n con impresoras de tickets",
        "Creaci贸n de aplicaci贸n de escritorio"
      ],
      learnings: [
        "Uso de Python para crear aplicaciones de escritorio",
        "Gesti贸n de estado en aplicaciones complejas",
        "Optimizaci贸n de consultas SQL",
        "Uso de Python para crear aplicaciones de escritorio"
      ],
    },
    {
      slug: "otradimensi贸n",
      title: "Otra Dimensi贸n",
      subtitle: "",
      description:
        "Aplicaci贸n web para subir im谩genes en un mapa y representar un evento. Esta aplicaci贸n fue creada para la hackathon Cloudinary CloudCreate: Spooky AI Hackathon.",
      imageUrl: "/OtraDimen.png",
      technologies: ["Angular", "Firebase", "Mapbox", "Cloudinary"],
      demoUrl: "https://otra-dimension.netlify.app/",
      githubUrl: "https://github.com/CarlosJimeEnez/otraDimension",
      features: [
        "Subir im谩genes a Cloudinary",
        "Manipular im谩genes con IA en Cloudinary",
        "Uso de Mapbox",
        "Uso de Firebase",
      ],
      challenges: [
        "Dise帽o de base de datos eficiente en Firebase",
        "Implementaci贸n de la IA con Cloudinary",
      ],
      learnings: [
        "Uso de Mapbox ",
        "Manipular im谩genes con Cloudinary",
        "Uso de base de datos en Firebase",
      ],
    },
    {
      slug: "rutawallet",
      title: "RutaWallet",
      subtitle: "",
      description:
        "Aplicaci贸n m贸vil para gestionar el presupuesto de transporte p煤blico en Puebla.",
      imageUrl: "/RutaWallet.png",
      technologies: ["Flutter", "Supabase", "MapLibre", "GetX"],
      // demoUrl: "https://rutawallet.netlify.app/",
      githubUrl: "https://github.com/CarlosJimeEnez/ruta_app",
      challenges: [
        "Gesti贸n de presupuesto",
        "Gesti贸n de viajes",
        "Gesti贸n de gastos",
      ],
      learnings: [
        "Dise帽o mobile",
        "Uso del gestor de estado GetX",
        "Uso de mapas en flutter",
        "Uso de base de datos en Supabase",
      ],
    },
  ];

  // Devolver un array de objetos con los par谩metros para cada ruta
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

// Recibir los datos del proyecto como props
const { project } = Astro.props;

// Destructurar los datos del proyecto
const {
  title,
  subtitle,
  description,
  imageUrl,
  technologies,
  githubUrl,
  demoUrl,
  features = [],
  challenges = [],
  learnings = [],
} = project;
---

<Main title={title}>
  <div class="min-h-screen bg-background dark:bg-accent/10 select-none">
    <Header />
    <main class="container mx-auto px-4 py-12 max-w-4xl">
      <!-- Bot贸n de regreso -->
      <div class="mb-6">
        <a
          href="/"
          class="inline-flex items-center text-gray-600 hover:text-primary transition-colors"
        >
          <ArrowLeft size={18} className="mr-2" />
          <p class="dark:text-gray-300 text-gray-500">Volver a proyectos</p>
        </a>
      </div>

      <!-- Encabezado del proyecto -->
      <h1
        class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-primary to-[#2BAE66] text-transparent bg-clip-text"
      >
        {title}
      </h1>

      <div class="prose prose-lg dark:prose-invert max-w-none mb-10">
        <p class="text-lg text-gray-700 dark:text-gray-300">
          {description}
        </p>
      </div>

      <!-- Enlaces -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold mb-4 flex items-center">
          <span class="text-primary mr-2"></span> Demo
        </h2>
        <div class="flex flex-wrap gap-4">
          {
            githubUrl && (
              <a href={githubUrl} target="_blank" rel="noopener noreferrer">
                <Button
                  variant="outline"
                  size="lg"
                  className="inline-flex items-center"
                >
                  <Github className="mr-2" size={20} />
                  Ver c贸digo
                </Button>
              </a>
            )
          }
          {
            demoUrl && (
              <a href={demoUrl} target="_blank" rel="noopener noreferrer">
                <Button
                  variant="default"
                  size="lg"
                  className="inline-flex items-center shadow-lg hover:shadow-xl transition-shadow shadow-primary/30 dark:text-gray-50"
                >
                  <ExternalLink className="mr-2" size={20} />
                  <p>Ver demo</p>
                </Button>
              </a>
            )
          }
          {
            !githubUrl && !demoUrl && (
              <div class="px-6 py-3 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg inline-flex items-center">
                <span class="text-gray-600 dark:text-gray-300 font-medium">Privado</span>
              </div>
            )
          }
        </div>
      </section>

      <!-- Imagen del proyecto -->
      <div
        class="mb-12 rounded-xl overflow-hidden shadow-xl border border-gray-200 dark:border-gray-800"
      >
        <img
          src={imageUrl}
          alt={`Captura de pantalla del proyecto ${title}`}
          class="w-full h-auto object-cover"
        />
      </div>

      <!-- Caracter铆sticas -->
      {
        features.length > 0 && (
          <section class="mb-12">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
              <span class="text-primary mr-2">З</span> Caracter铆sticas
            </h2>
            <ul class="list-disc pl-6 space-y-2 text-gray-700 dark:text-gray-300">
              {features.map((feature) => (
                <li>{feature}</li>
              ))}
            </ul>
          </section>
        )
      }

      <!-- Tecnolog铆as utilizadas -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold mb-4 flex items-center">
          <span class="text-primary mr-2"></span> Tecnolog铆as utilizadas
        </h2>
        <div class="flex flex-wrap gap-2">
          {
            technologies.map((tech) => (
              <span class="px-4 py-2 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full text-sm font-medium">
                {tech}
              </span>
            ))
          }
        </div>
      </section>

      <!-- Objetivo -->
      {
        challenges.length > 0 && (
          <section class="mb-12">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
              <span class="text-primary mr-2"></span> Desaf铆os
            </h2>
            <div class="prose prose-lg dark:prose-invert max-w-none">
              <ul class="list-disc pl-6 space-y-2 text-gray-700 dark:text-gray-300">
                {challenges.map((challenge) => (
                  <li>{challenge}</li>
                ))}
              </ul>
            </div>
          </section>
        )
      }

      <!-- Aprendizajes -->
      {
        learnings.length > 0 && (
          <section class="mb-12">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
              <span class="text-primary mr-2"></span> Aprendizajes
            </h2>
            <div class="prose prose-lg dark:prose-invert max-w-none">
              <ul class="list-disc pl-6 space-y-2 text-gray-700 dark:text-gray-300">
                {learnings.map((learning) => (
                  <li>{learning}</li>
                ))}
              </ul>
            </div>
          </section>
        )
      }

      <!-- CTA -->
      <section
        class="my-16 p-8 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-xl text-center"
      >
        <h2 class="text-2xl font-bold mb-4">
          驴Listo para llevar tu idea al siguiente nivel?
        </h2>
        <p class="mb-6">Trabajemos juntos en tu pr贸ximo proyecto.</p>
        <a href="mailto:jc.jimenez.pena@outlook.com">
          <Button
            variant="default"
            size="lg"
            className="shadow-lg hover:shadow-xl transition-shadow shadow-primary/30 dark:text-gray-50"
          >
            Cont谩ctame
          </Button>
        </a>
      </section>
    </main>
  </div>
  
</Main>
